명확하게 역할을 분리해서 설명해 드릴게요. 이렇게 생각하시면 가장 쉽습니다.

.github/workflows/crawler.yml (감독관 파일): "어떤 대분류 작업을 실행할 것인가?" 라는 큰 그림만 결정합니다. (예: "공통자재 크롤링 시작!", "건축자재 크롤링 시작!")
crawler/kpi_crawler.py (실무자 파일): 각 작업을 전달받아서, "그 작업 내부의 세부 사항을 어떻게 처리할 것인가?" 를 결정합니다. (예: "알겠습니다. 공통자재 크롤링을 시작하는데, 그 안의 '시멘트'는 건너뛰고, '형강'에서는 'H형강'만 빼고 작업하겠습니다.")
따라서, 사용하지 않으려는 중분류와 소분류는 kpi_crawler.py 파일에서 설정합니다.
중분류 / 소분류 제외 설정 방법 (자세한 가이드)
crawler/kpi_crawler.py 파일을 엽니다.
파일의 맨 위쪽에 있는 KpiCrawler 클래스 바로 아래, EXCLUSION_LIST 라는 부분을 찾습니다. 아래와 같이 생겼습니다.
code
Python
class KpiCrawler:
    """한국물가정보(KPI) 사이트 크롤러"""

    # <<< 1. 바로 여기! 이 목록을 자유롭게 편집하시면 됩니다 >>>
    #
    #   - 중분류 전체를 제외하려면: "중분류명": "__ALL__"
    #   - 특정 소분류만 제외하려면: "중분류명": ["제외할 소분류명1", "제외할 소분류명2"]
    #
    EXCLUSION_LIST = {
        "공통자재": {
            "시멘트": "__ALL__",
            "형강": ["H형강", "I형강"]
        },
        "건축자재": {
            "목재": "__ALL__"
        },
    }

    def __init__(self, ...): # 이 아래는 건드리지 마세요.
        # ...
EXCLUSION_LIST 안에 있는 내용을 원하는 규칙에 맞게 직접 편집합니다.
규칙 설명 및 예시
규칙 1: 중분류 전체를 제외하고 싶을 때
"제외할 중분류명": "__ALL__" 이라고 적습니다.
예시: "토목자재" 대분류 안에 있는 "골재" 중분류는 데이터 전체가 필요 없을 경우
code
Python
"토목자재": {
    "골재": "__ALL__"
}
규칙 2: 특정 소분류만 골라서 제외하고 싶을 때
"해당 중분류명": ["제외할 소분류명1", "제외할 소분류명2"] 와 같이 리스트(대괄호 []) 안에 소분류 이름을 적습니다.
예시: "전기자재" 대분류의 "전선" 중분류 안에서, "통신 케이블"과 "광케이블" 데이터만 빼고 싶을 경우
code
Python
"전기자재": {
    "전선": ["통신 케이블", "광케이블"]
}
실제 종합 예시
사용자님의 요구사항에 맞춰 EXCLUSION_LIST를 아래와 같이 구성할 수 있습니다.
code
Python
EXCLUSION_LIST = {
            # "공통자재" 대분류에 대한 제외 규칙
            "공통자재": {
                "레미콘": "__ALL__",      # '레미콘' 중분류는 통째로 제외
                "봉강": ["고장력철근"]   # '봉강' 중분류에서는 '고장력철근' 소분류만 제외
            },
            
            # "건축자재" 대분류에 대한 제외 규칙
            "건축자재": {
                "단열재": "__ALL__",      # '단열재' 중분류는 통째로 제외
                "타일": ["외장타일"]     # '타일' 중분류에서는 '외장타일' 소분류만 제외
            },

            # "토목자재" 대분류에 대한 제외 규칙
            "토목자재": {
                # 이 대분류에서는 제외할 것이 없으면 비워두거나 아예 "토목자재" 키를 삭제해도 됩니다.
            },
            
            # "전기자재" 대분류에 대한 제외 규칙
            "전기자재": {
                "배선기구": ["스위치류", "콘센트류"]
            }
        }
작업 흐름
세부 제외 목록 수정: kpi_crawler.py 파일의 EXCLUSION_LIST를 원하는 대로 편집합니다.
저장 및 Push: 수정한 kpi_crawler.py 파일을 저장하고 git add ., git commit, git push를 통해 GitHub에 올립니다.
이제 자동화 시스템이 실행될 때, crawler.yml이 "공통자재 크롤링해!"라고 명령을 내리면, kpi_crawler.py는 "네, 그런데 EXCLUSION_LIST를 보니 '레미콘'은 빼고, '봉강'에서는 '고장력철근'을 빼고 작업해야겠네요." 라고 알아서 판단하여 지능적으로 크롤링을 수행하게 됩니다.
\

