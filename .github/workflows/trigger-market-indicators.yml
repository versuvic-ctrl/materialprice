name: Trigger Market Indicators Update

on:
  schedule:
    # 한국 시간 기준, 오전 6시부터 오후 8시까지 2시간 간격으로 실행
    - cron: '0 21,23,1,3,5,7,9,11 * * *'
  
  workflow_dispatch: # 수동 실행 허용

jobs:
  trigger-api:
    runs-on: ubuntu-latest
    steps:
      - name: Trigger Market Indicators API
        env:
          VERCEL_DEPLOYMENT_URL: ${{ secrets.VERCEL_DEPLOYMENT_URL }}
        run: |
          if [ -z "$VERCEL_DEPLOYMENT_URL" ]; then
            echo "::error::VERCEL_DEPLOYMENT_URL secret is not set."
            exit 1
          fi

          echo "Triggering market indicators update..."
          
          # ==========================================================
          # ▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼ 이 부분이 수정되었습니다 ▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼
          # -L 옵션 추가: 리디렉션 발생 시 자동으로 따라가도록 설정
          # ==========================================================
          curl --fail -L -X POST "${VERCEL_DEPLOYMENT_URL}/api/market-indicators"
          # ==========================================================
          # ▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲
          # ==========================================================
          
          echo "API trigger completed."```

### 변경 후 확인 사항